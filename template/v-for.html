<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多筆資料渲染 v-for</title>
    <!-- Bootstarp 5 CSS CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <style></style>
  </head>
  <body>
    <div id="app">
      <div class="container py-5">
        <h2>多筆資料渲染 v-for</h2>
        <h3>呈現多筆資料於畫面上 v-for</h3>
        <p>菜單</p>
        <ul>
          <li v-for="(item, key) in products">
            {{ key + 1 }} - {{ item.name }} / {{ item.price }}元
          </li>
        </ul>

        <h3>物件迴圈</h3>
        <ul>
          <li v-for="(item, key) in productsObj">
            <!-- key 值就是物件的屬性名稱 -->
            {{ key }} - {{ item.name }} / {{ item.price }}元
          </li>
        </ul>

        <h3>純數值迴圈</h3>
        <ul>
          <li v-for="i in 5">{{ i }}</li>
        </ul>

        <h3>v-for 與 key</h3>
        <p>菜單</p>
        <ul>
          <li v-for="(item, key) in products" v-bind:key="item.name">
            {{ key }} - {{ item.name }} / {{ item.price }} 元
            <input type="text" />
          </li>
        </ul>
        <p>
          說明：有相同父元素的子元素必須有獨特的 key。重複的 key
          會造成渲染錯誤。
        </p>
        <button type="button" v-on:click="reverseArray">反轉資料內容</button>

        <hr />
        <h3>進階技巧: 在 template 標籤使用 v-for</h3>
        <table class="table">
          <tbody>
            <template v-for="(item, i) in products" v-bind:key="item.name">
              <tr>
                <th rowspan="2">{{ i + 1}}</th>
                <td colspan="2">{{ item.name }}</td>
              </tr>
              <tr>
                <td>{{ item.price }}元</td>
                <!-- 使用表達式來回傳 -->
                <!-- 三元運算子 -->
                <!-- 變數 ? "true的結果" : "false的結果" -->
                <td>{{ item.vegan ? "素食" : "不可素食"}}</td>
              </tr>
            </template>
          </tbody>
        </table>
        <p>
          <a
            href="https://vue3js.cn/docs/zh/guide/list.html#%E5%9C%A8-template-%E4%B8%AD%E4%BD%BF%E7%94%A8-v-for"
            >參考介紹</a
          >
        </p>

        <h3>補充說明:v-for 與元件</h3>
        <ul>
          <list-item
            :item="item"
            v-for="(item, key) in products"
            :key="item.name + 2"
          ></list-item>
        </ul>
      </div>
    </div>

    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Bootstrap 5 JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const app = {
        // 資料 (函式)
        data() {
          return {
            name: "小明",
            products: [
              {
                name: "蛋餅",
                price: 30,
                vegan: false,
              },
              {
                name: "飯糰",
                price: 35,
                vegan: false,
              },
              {
                name: "小籠包",
                price: 60,
                vegan: false,
              },
              {
                name: "蘿蔔糕",
                price: 30,
                vegan: true,
              },
            ],
            productsObj: {
              chineseOmelette: {
                name: "蛋餅",
                price: 30,
                vegan: false,
              },
              riceBall: {
                name: "飯糰",
                price: 35,
                vegan: false,
              },
              soupDumpling: {
                name: "小籠包",
                price: 60,
                vegan: false,
              },
              radishCake: {
                name: "蘿蔔糕",
                price: 30,
                vegan: true,
              },
            },
          };
        },
        // 生命週期 (函式)
        created() {
          console.log(this);
        },
        // 方法 (物件)
        methods: {
          reverseArray: function () {
            this.products.reverse();
          },
        },
      };

      Vue.createApp(app)
        .component("list-item", {
          template: `
          <li>
            {{ item.name }} / {{ item.price }} 元
          </li>
        `,
          props: ["item"],
        })
        .mount("#app");
    </script>
  </body>
</html>
